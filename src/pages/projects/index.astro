---
import React from "react";
import Layout from "../../layouts/Layout.astro";
import { sanityClient } from "sanity:client";
import SanityPicture, { picture } from "astro-sanity-picture";
import imageUrlBuilder from "@sanity/image-url";

const projects = await sanityClient.fetch(
  `*[_type == "project" && defined(slug)] | order(publishedAt desc) {
    title,
    slug,
    shortDescription,
    ${picture("mainImage")}
  }`
);
import CardComponent from "../../components/CardComponent";
---

<Layout title="Projects - Antoine ANDO">
  <h1 class="font-bold text-4xl mb-5">Projects</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    {
      projects.map((project: any) => {
        return (
          <a href={"/projects/" + project.slug.current}>
            <CardComponent
              title={project.title}
              subtitle={project.shortDescription}
            >
              <picture class="self-center mb-5">
                <img
                  src={project.mainImage.asset.url + "?h=200"}
                  alt="Flowers"
                />
              </picture>

              {/* <CardNext key={project._id}>
            <CardBody>
              <a
                href={`/projects/${project.slug.current}`}
                class="flex flex-col"
              >
                <h2 class="text-xl font-bold">{project.title}</h2>
                <p>{project.shortDescription}</p>
              </a>
            </CardBody>
          </CardNext> */}
            </CardComponent>
          </a>
        );
      })
    }
  </div>
</Layout>
